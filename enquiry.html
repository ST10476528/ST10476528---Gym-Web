<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enquiry | FlexLab Fitness</title>

  <!-- Meta for SEO -->
  <meta name="description" content="Ask about memberships, classes, personal training or facility tours. FlexLab Fitness enquiry form." />

  <!-- Fonts (optional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0f1115;
      --panel: #161a22;
      --muted: #8b95a7;
      --text: #e6e9ef;
      --brand: #ff3b3b;
      --brand-2: #ff9d00;
      --ok: #2ecc71;
      --err: #ff6262;
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, #1d2330 0%, #0f1115 50%), var(--bg);
      line-height: 1.5;
    }
    a { color: #fff; text-decoration: none; }
    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(140%) blur(8px);
      background: rgba(15,17,21,.6);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .wrap { max-width: 980px; margin: 0 auto; padding: 18px 20px; }
    .brand { font-weight: 800; letter-spacing: .3px; }
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 22px;
      margin-top: 26px;
    }
    @media (min-width: 960px) {
      .grid { grid-template-columns: 1.1fr .9fr; gap: 26px; }
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.005));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: 0 10px 40px rgba(0,0,0,.25);
    }
    h1 { margin: 8px 0 8px; font-size: clamp(28px, 3.4vw, 40px); }
    p.lead { color: var(--muted); margin-top: 0; }

    /* Form */
    form { display: grid; gap: 14px; }
    .row { display: grid; gap: 14px; grid-template-columns: 1fr; }
    @media (min-width: 640px) { .row.two { grid-template-columns: 1fr 1fr; } }
    label { font-weight: 600; font-size: 14px; margin-bottom: 6px; display: inline-block; }
    .field { display: grid; gap: 6px; }
    input, select, textarea {
      width: 100%;
      background: #0c0f14;
      color: var(--text);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      padding: 12px 14px;
      outline: 0;
      transition: border .15s ease, box-shadow .15s ease;
    }
    input:focus, select:focus, textarea:focus {
      border-color: rgba(255,255,255,.25);
      box-shadow: 0 0 0 3px rgba(255,255,255,.06);
    }
    textarea { min-height: 130px; resize: vertical; }
    .hint { color: var(--err); font-size: 12px; min-height: 14px; }
    .has-error input, .has-error textarea, .has-error select { border-color: var(--err); }
    .help { color: var(--muted); font-size: 12px; }

    .actions { display: flex; align-items: center; gap: 12px; margin-top: 8px; }
    .btn {
      background: linear-gradient(90deg,var(--brand),var(--brand-2));
      color: #111;
      font-weight: 800;
      border: 0;
      border-radius: 12px;
      padding: 12px 16px;
      cursor: pointer;
      transition: transform .08s ease, filter .15s ease, opacity .15s ease;
    }
    .btn:hover { filter: brightness(1.05); }
    .btn:active { transform: translateY(1px) scale(.99); }
    .btn[disabled] { opacity: .6; cursor: not-allowed; }

    .success {
      display: none;
      border-radius: 12px;
      padding: 12px 14px;
      background: rgba(46, 204, 113, .12);
      border: 1px solid rgba(46, 204, 113, .35);
      color: #b7f3cd;
      font-weight: 600;
    }
    .success.show { display: block; }

    /* Side card */
    .contact-card p { margin: 6px 0; color: var(--muted); }
    .map {
      border: 0; width: 100%; height: 260px; border-radius: 12px;
      background: #0c0f14;
    }

    /* Progress bar hook if you include gym.js */
    #scrollProgress { position: fixed; top: 0; left: 0; height: 4px; width: 0; background: linear-gradient(90deg,#ff3b3b,#ff9d00); z-index: 9999; transition: width .15s ease-out; }
  </style>
</head>
<body data-gym-name="FlexLab Fitness" data-gym-city="Cape Town" data-gym-country="ZA">

  <!-- Top progress bar (works with your gym.js scroll progress) -->
  <div id="scrollProgress"></div>

  <header>
    <div class="wrap">
      <a href="index.html" class="brand">FlexLab Fitness</a>
    </div>
  </header>

  <main class="wrap">
    <h1 class="reveal">Enquiry Form</h1>
    <p class="lead reveal">Ask us about memberships, class schedules, day passes, or personal training — we’ll get back to you ASAP.</p>

    <div class="grid">
      <!-- FORM PANEL -->
      <section class="card reveal">
        <form id="enquiry-form" novalidate>
          <div class="row two">
            <div class="field">
              <label for="fullName">Full name</label>
              <input id="fullName" name="fullName" type="text" placeholder="Aysha Samuels" autocomplete="name" required />
              <div class="hint"></div>
            </div>

            <div class="field">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" autocomplete="email" required />
              <div class="hint"></div>
            </div>
          </div>

          <div class="row two">
            <div class="field">
              <label for="phone">Phone (optional)</label>
              <input id="phone" name="phone" type="tel" placeholder="+27 82 555 1234" autocomplete="tel" />
              <div class="hint"></div>
            </div>

            <div class="field">
              <label for="topic">Topic</label>
              <select id="topic" name="topic" required>
                <option value="">Select a topic…</option>
                <option value="membership">Memberships</option>
                <option value="classes">Classes & Schedule</option>
                <option value="pt">Personal Training</option>
                <option value="tour">Facility Tour</option>
                <option value="other">Other</option>
              </select>
              <div class="hint"></div>
            </div>
          </div>

          <div class="field">
            <label for="message">Your message</label>
            <textarea id="message" name="message" placeholder="Tell us what you’re looking for…" required></textarea>
            <div class="hint"></div>
          </div>

          <div class="field">
            <label><input type="checkbox" name="consent" id="consent" /> I agree to be contacted about my enquiry.</label>
            <div class="help">We’ll never share your details.</div>
            <div class="hint"></div>
          </div>

          <div class="actions">
            <button class="btn" type="submit" id="submitBtn">Send enquiry</button>
            <span class="help" id="saving" style="display:none;">Sending…</span>
          </div>

          <div id="success" class="success" role="status" aria-live="polite">
            ✅ Thanks! Your enquiry has been sent — we’ll reply shortly.
          </div>
        </form>
      </section>

      <!-- SIDE INFO -->
      <aside class="card contact-card reveal">
        <h3>Contact details</h3>
        <p><strong>Address:</strong> 123 Bree St, Cape Town</p>
        <p><strong>Hours:</strong> Mon–Fri 5:30–21:00, Sat 7:00–18:00</p>
        <p><strong>Email:</strong> <a href="mailto:hello@flexlab.fit">hello@flexlab.fit</a></p>
        <p><strong>Phone:</strong> <a href="tel:+27215550100">+27 21 555 0100</a></p>

        <h3 style="margin-top:16px;">Find us</h3>
        <iframe
          id="mapFrame"
          class="map"
          title="Gym Location"
          loading="lazy"
          data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3310.667!2d18.417!3d-33.924!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3AGym!2sFlexLab!5e0!3m2!1sen!2sza!4v123"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </aside>
    </div>
  </main>

  <!-- If you already use gym.js, include it; it will handle the map lazy-load and progress bar -->
  <script src="gym.js" defer></script>

  <!-- Page-specific JS (validation + submit) -->
  <script>
    (() => {
      const $ = (s, r = document) => r.querySelector(s);
      const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));

      const emailOk = v => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(v || "");
      const phoneOk = v => !v || /^[+()\\-\\s\\d]{7,}$/.test(v);

      const setFieldError = (input, msg = "") => {
        const field = input.closest(".field");
        if (!field) return;
        field.classList.toggle("has-error", !!msg);
        const hint = field.querySelector(".hint");
        if (hint) hint.textContent = msg;
      };

      const form = $("#enquiry-form");
      const btn = $("#submitBtn");
      const saving = $("#saving");
      const success = $("#success");

      const submitTo = {
        // OPTION A (no backend): Formspree endpoint (create one & paste here)
        formspree: "", // e.g. "https://formspree.io/f/abcdwxyz"
        // OPTION B (your backend API): POST JSON to /api/enquiries
        local: "/api/enquiries"
      };

      form?.addEventListener("submit", async (e) => {
        e.preventDefault();
        success.classList.remove("show");

        const data = Object.fromEntries(new FormData(form).entries());

        // validation
        let ok = true;
        if (!data.fullName || data.fullName.trim().length < 2) { setFieldError(form.fullName, "Please enter your full name."); ok = false; } else setFieldError(form.fullName);
        if (!emailOk(data.email)) { setFieldError(form.email, "Enter a valid email."); ok = false; } else setFieldError(form.email);
        if (!phoneOk(data.phone)) { setFieldError(form.phone, "Use digits and + ( ) - only."); ok = false; } else setFieldError(form.phone);
        if (!data.topic) { setFieldError(form.topic, "Please choose a topic."); ok = false; } else setFieldError(form.topic);
        if (!data.message || data.message.trim().length < 10) { setFieldError(form.message, "Please add a short message."); ok = false; } else setFieldError(form.message);
        if (!form.consent.checked) { setFieldError(form.consent, "Please confirm we can contact you."); ok = false; } else setFieldError(form.consent);

        if (!ok) return;

        // UX state
        btn.disabled = true;
        saving.style.display = "inline";

        // choose destination (Formspree if provided, else local)
        const endpoint = submitTo.formspree || submitTo.local;

        try {
          // If using Formspree, send as form-encoded; if local API, send JSON:
          const res = await fetch(endpoint, submitTo.formspree
            ? { method: "POST", headers: { "Accept": "application/json" }, body: new FormData(form) }
            : { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(data) }
          );

          if (!res.ok) throw new Error("Request failed");

          form.reset();
          success.classList.add("show");
        } catch (err) {
          alert("Sorry — we couldn’t send your enquiry right now. Please email hello@flexlab.fit.");
        } finally {
          btn.disabled = false;
          saving.style.display = "none";
        }
      });
    })();
  </script>
</body>
</html>
